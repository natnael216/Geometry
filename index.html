<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Geometry Mini App</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    body {
      background-color: #1e1e2d; /* Telegram-style dark */
      color: #fff;
      font-family: sans-serif;
      margin: 0;
      padding: 20px;
      user-select: none;
      -webkit-user-select: none;
      -moz-user-select: none;
      -ms-user-select: none;
    }

    ::selection {
      background: none;
    }

    html, body {
      height: 100%;
    }

    h1 {
      font-size: 2rem;
      font-weight: bold;
      margin-bottom: 20px;
    }

    p {
      white-space: pre-wrap;
      line-height: 1.6;
    }

    #content-wrapper {
      max-width: 100%;
      padding: 0;
      margin: 0;
    }

    @media screen {
      body:after {
        content: '';
        display: block;
        position: fixed;
        top: 0; left: 0;
        width: 100vw; height: 100vh;
        pointer-events: none;
        background: rgba(0, 0, 0, 0);
        z-index: 9999;
      }
    }
  </style>
</head>
<body>
  <div id="content-wrapper">
    <h1 id="title">Loading...</h1>
    <p id="content"></p>
  </div>

  <script src="https://telegram.org/js/telegram-web-app.js"></script>

  <script>
    const topics = {
      "point": {
        title: "Point",
        content: `A point is a precise location in space and has no size, area, length, or volume.

Key points:
- Represented by a dot.
- Usually labeled with a capital letter (e.g., A, B, C).
- Fundamental building block in geometry.`
      },
      "line": {
        title: "Line",
        content: `A line is a straight one-dimensional figure that extends infinitely in both directions.

Key points:
- Has length but no thickness.
- Defined by two points on it (e.g., line AB).
- Can be horizontal, vertical, or slanted.`
      },
      "triangle": {
        title: "Triangle",
        content: `A triangle is a polygon with three sides and three angles.

Key points:
- Types by sides: Equilateral, Isosceles, Scalene.
- Types by angles: Acute, Right, Obtuse.
- Sum of internal angles is always 180°.
- Area = 1/2 × base × height.`
      }
    };

    function updateContent(topicKey) {
      const titleElement = document.getElementById("title");
      const contentElement = document.getElementById("content");

      const topic = topics[topicKey];

      if (topic) {
        titleElement.textContent = topic.title;
        contentElement.textContent = topic.content;
      } else {
        titleElement.textContent = "Topic Not Found";
        contentElement.textContent = "This topic is not in our database. Use the bot to get a valid topic link.";
      }
    }

    document.addEventListener('DOMContentLoaded', () => {
      let topicKey = null;

      if (window.Telegram && window.Telegram.WebApp) {
        window.Telegram.WebApp.ready();
        if (Telegram.WebApp.initDataUnsafe?.start_param) {
          topicKey = Telegram.WebApp.initDataUnsafe.start_param;
        }
      }

      if (!topicKey) {
        const urlParams = new URLSearchParams(window.location.search);
        topicKey = urlParams.get("topic");
      }

      if (topicKey) {
        updateContent(topicKey);
      } else {
        document.getElementById("title").textContent = "Welcome to Grade 9 Geometry tutorials _stay with us!";
      }
    });
  </script>
</body>
</html>
